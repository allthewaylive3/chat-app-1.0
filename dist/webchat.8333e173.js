(0,globalThis.parcelRequire1352.register)("k19Rm",function(e,t){let a,n,o;let s=(e,t,o=!1,s=!1,i=n)=>{let d;let c=document.createElement("li");c.classList.add("x1z2Chat-chat",t);let l=document.createElement("p"),r=o?e:e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/!\[(.*?)\]\((https?:\/\/\S+(?:jpg|jpeg|png|gif|bmp))\)/gi,'<a href="$2" class="x1z2Chat-image-link" target="_blank"><img src="$2" alt="$1" class="thumbnail"></a>').replace(/\[(.*?)\]\((https?:\/\/\S+)\)/gi,'<a href="$2" target="_blank">$1</a>');if(l.innerHTML=r,"incoming"===t){let e=document.createElement("img");e.src=i,e.classList.add("x1z2Chat-assistant-avatar"),c.appendChild(e)}c.appendChild(l),a.appendChild(c),a.scrollTo(0,a.scrollHeight)};function i(){var e=document.getElementById("chat-popup"),t=document.querySelector(".x1z2Chat-close-popup"),a=document.querySelector(".x1z2Chat-chatbot-toggler"),i=!1;function d(){e.style.opacity=0,e.style.visibility="hidden",sessionStorage.setItem("popupClosed","true")}window.addEventListener("scroll",function(){window.pageYOffset>300&&!i&&(i=!0,setTimeout(function(){sessionStorage.getItem("popupClosed")||(e.style.opacity=1,e.style.visibility="visible")},4e3))}),t&&t.addEventListener("click",d),a&&a.addEventListener("click",d),e&&e.addEventListener("click",function(){document.body.classList.toggle("x1z2Chat-show-chatbot"),!sessionStorage.getItem("threadId")&&document.body.classList.contains("x1z2Chat-show-chatbot")&&function(){let e;let t=document.getElementById("encryptedDataPayload").value,a=document.getElementById("encryptedDataId").value,n=window.location.hostname;fetch("https://next.leads-mania.com/webchat/create-thread",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:((e=sessionStorage.getItem("sessionId"))||(e=uuid.v4(),sessionStorage.setItem("sessionId",e)),e),dataPayload:t,dataId:a,hostname:n})}).then(e=>e.json()).then(e=>{e.success&&e.data&&e.data.threadID&&sessionStorage.setItem("threadId",e.data.threadID)}).catch(e=>console.error("Error creating thread:",e))}(),!document.querySelector(".x1z2Chat-chatbox .incoming")&&o&&setTimeout(()=>{s(o,"incoming",!1,n)},1e3),d()})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i()});
//# sourceMappingURL=webchat.8333e173.js.map
